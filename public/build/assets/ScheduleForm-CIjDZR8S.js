import{r as i,j as e,W as v}from"./app-FSuRwzc-.js";import{S as j}from"./search-BozJD7py.js";import{X as N}from"./x-I9WJRx4-.js";import"./createLucideIcon-D09iAW81.js";function p({options:d,value:c,onChange:l,placeholder:h,label:f,required:n=!1}){const[a,o]=i.useState(!1),[m,b]=i.useState(""),u=i.useRef(null),g=i.useRef(null);i.useEffect(()=>{function t(x){u.current&&!u.current.contains(x.target)&&(o(!1),b(""))}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const s=d.filter(t=>{var x;return t.label.toLowerCase().includes(m.toLowerCase())||((x=t.sublabel)==null?void 0:x.toLowerCase().includes(m.toLowerCase()))}),r=d.find(t=>t.id===c),y=t=>{l(t),o(!1),b("")};return e.jsxs("div",{className:"relative",ref:u,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f}),e.jsx("div",{className:"relative cursor-pointer",onClick:()=>{o(!0),setTimeout(()=>{var t;return(t=g.current)==null?void 0:t.focus()},0)},children:e.jsx("div",{className:`w-full rounded-lg border ${a?"border-blue-500 ring-1 ring-blue-500":"border-gray-300"} shadow-sm px-3 py-2 text-gray-900`,children:r?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r.label}),r.sublabel&&e.jsx("div",{className:"text-sm text-gray-600",children:r.sublabel})]}):e.jsx("span",{className:"text-gray-500",children:h})})}),a&&e.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white rounded-lg border border-gray-200 shadow-lg",children:[e.jsx("div",{className:"p-2 border-b border-gray-100",children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{ref:g,type:"text",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Search...",value:m,onChange:t=>b(t.target.value)})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:s.length===0?e.jsx("div",{className:"p-3 text-sm text-gray-600",children:"No results found"}):s.map(t=>e.jsxs("div",{className:`px-3 py-2 hover:bg-gray-50 cursor-pointer ${t.id===c?"bg-blue-50":""}`,onClick:()=>y(t.id),children:[e.jsx("div",{className:"font-medium",children:t.label}),t.sublabel&&e.jsx("div",{className:"text-sm text-gray-600",children:t.sublabel})]},t.id))})]}),e.jsx("input",{type:"text",required:n,value:c,onChange:()=>{},className:"sr-only",tabIndex:-1,"aria-hidden":"true"})]})}function k({onClose:d,onSubmit:c,initialDate:l,units:h,cohorts:f}){l.setHours(l.getHours()+3),l.setMinutes(0);const{data:n,setData:a,post:o,processing:m,errors:b,reset:u}=v({attendance_link:"",unit_id:0,cohort_id:0,day:new Date(l.setHours(l.getHours()+1)).toISOString().split("T")[0],start_time:new Date(l.setHours(l.getHours()+1)).toISOString().split("T")[1].slice(0,5),end_time:new Date(l.setHours(l.getHours()+2)).toISOString().split("T")[1].slice(0,5),venue:"",status:"active"}),g=s=>{s.preventDefault(),o(route("schedule.store"),{onFinish:()=>{u("attendance_link","unit_id","cohort_id","day","start_time","end_time","venue","status"),d()}})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Schedule New Class"}),e.jsx("button",{onClick:d,className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[e.jsx(p,{label:"Unit",placeholder:"Select a unit",options:h.map(s=>({id:s.id,label:s.name,sublabel:s.code})),value:n.unit_id,onChange:s=>a(r=>({...r,unit_id:s})),required:!0}),e.jsx(p,{label:"Cohort",placeholder:"Select a cohort",options:f.map(s=>({id:s.id,label:s.name,sublabel:s.code})),value:n.cohort_id,onChange:s=>a(r=>({...r,cohort_id:s})),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",required:!0,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:n.day,onChange:s=>a(r=>({...r,day:s.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",required:!0,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:n.start_time,onChange:s=>a(r=>({...r,start_time:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",required:!0,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:n.end_time,onChange:s=>a(r=>({...r,end_time:s.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Venue"}),e.jsx("input",{type:"text",required:!0,placeholder:"Enter venue",className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",value:n.venue,onChange:s=>a(r=>({...r,venue:s.target.value}))})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:"Schedule Class"})]})]})]})})}export{k as default};
